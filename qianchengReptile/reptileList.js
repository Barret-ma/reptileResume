/**
 * Created by barret.ma on 2017/5/15.
 */
let superagent = require('superagent');
let cheerio = require('cheerio');
let getSetting = require('../readConfig');
let parseDetail = require('./reptileDetail');
let setting = getSetting('qiancheng');
let generateIp = require('../randomIp');
module.exports = function() {
    [2].forEach(page => {
        // 前程
        let pageParam  = 'pagerBottom$btnNum' + page;
        // console.log(pageParam);
        //
        superagent
            .post('http://ehire.51job.com/Inbox/CompanyHRDefault2.aspx?Page=2&belong=3')
            .set('Content-Type', 'application/x-www-form-urlencoded')
            .set('Cookie', setting.cookie)
            // .set('X-Forwarded-For', generateIp())
            //前程
            .send({pagerBottom$btnNum2: page, __VIEWSTATE: "/wEPDwUKMTk1MTI0NzE0Ng8WGB4Nc3RyT3JkZXJCeUNvbAUHUFVUREFURR4IUGFnZVNpemUCFB4ESXNFTmgeEHZzU2VsZWN0ZWRGaWVsZHMFPkxBQkVMSUQsU0VYLEFHRSxBUkVBLFRPUERFR1JFRSxXT1JLWUVBUixTT1VSQ0UsSk9CTkFNRSxQVVREQVRFHgxzdHJTZWxlY3RDb2wFPkxBQkVMSUQsU0VYLEFHRSxBUkVBLFRPUERFR1JFRSxXT1JLWUVBUixTT1VSQ0UsSk9CTkFNRSxQVVREQVRFHgpzdHJEZWZUeXBlBQEyHgxUb3RhbFJlY29yZHMCkgMeC3N0clBhZ2VUeXBlBQEyHgpzdHJPcmRlckJ5BQRERVNDHg5zdHJSc21WaWV3TW9kZQUBMR4JUGFnZUluZGV4AgMeDnN0ckRlZmF1bHRQYWdlZRYCAgEPZBYaAgQPZBYGZg8PFgIeBFRleHRlZGQCAQ8PFgIfDGVkZAICDxYCHgRocmVmBQEjZAIFDw8WEB4NU2VhcmNoQnRuRmxhZwUDMl8yHhJTcGVjaWFsQ29udHJvbE5hbWUFB0pPQk5BTUUeFkNhbmRpZGF0ZURlZmF1bHRTZWFyY2hlHgVGb2RJRAUBMh4USXNIYXNDb21wYW55RGl2aXNpb25oHghTUUxXaGVyZQVoIEFORCBELlBVVERBVEUgPj0gVE9fREFURSgnMjAxNy0wMi0xNCcsJ3l5eXktTU0tZGQnKSBBTkQgRC5QVVREQVRFPFRPX0RBVEUoJzIwMTctMDUtMTUnLCd5eXl5LU1NLWRkJykrMSAeCFNRTFRhYmxlBR5TX3Jlc3VtZXNlYXJjaCBhLHNfQ29tcGFueUhSIGQfDAUl5pS+5YWl5pe26Ze0IDoyMDE3LTAyLTE05YiwMjAxNy0wNS0xNWQWHGYPZBYCZg9kFgQCAQ8QZBAVARLor7fpgInmi6nmkJzntKLlmagVAQAUKwMBZxYBZmQCAw8PFgIfDAUG5Yig6ZmkFgIeB29uY2xpY2sFF3JldHVybiBjb25maXJtRGVsQ29uZCgpZAIBDw8WAh8MBRPmnIDov5HmkJzntKLmnaHku7Y6ZGQCAg8PFgQeB1Rvb2xUaXAFBuWFqOaXth8MBQblhajml7ZkZAIDDw8WAh8MBQbmn6Xor6IWAh8VBRZyZXR1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joYM5bel5L2c5bm06ZmQDOeugOWOhuadpea6kAzlupTogZjogYzkvY0M5pS+5YWl5pe26Ze0FQoAB0xBQkVMSUQDU0VYA0FHRQRBUkVBCVRPUERFR1JFRQhXT1JLWUVBUgZTT1VSQ0UHSk9CTkFNRQdQVVREQVRFFCsDCmdnZ2dnZ2dnZ2dkZAIWDxAPFgYfJAUFVkFMVUUfJQUEQ09ERR8mZ2QQFQoNLS3or7fpgInmi6ktLQbmoIfnrb4G5oCn5YirBuW5tOm+hAnlsYXkvY/lnLAG5a2m5Y6GDOW3peS9nOW5tOmZkAznroDljobmnaXmupAM5bqU6IGY6IGM5L2NDOaUvuWFpeaXtumXtBUKAAdMQUJFTElEA1NFWANBR0UEQVJFQQlUT1BERUdSRUUIV09SS1lFQVIGU09VUkNFB0pPQk5BTUUHUFVUREFURRQrAwpnZ2dnZ2dnZ2dnZGQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFi8FFGN0cmxTZXJhY2gkY2hrVHdvQWxsBRljdHJsU2VyYWNoJGNoa1R3b1NlbGVjdCQwBRZjdHJsU2VyYWNoJGNoa1NlbGVjdCQwBRJjdHJsU2VyYWNoJGNoa0ZMJDAFFmN0cmxTZXJhY2gkY2hrX2RlZmF1bHQFDmNoa0RlZmF1bHRQYWdlBQdpbWdEaXMxBQdpbWdEaXMyBQxjYnhDb2x1bW5zJDAFDGNieENvbHVtbnMkMQUMY2J4Q29sdW1ucyQyBQxjYnhDb2x1bW5zJDMFDGNieENvbHVtbnMkNAUMY2J4Q29sdW1ucyQ1BQxjYnhDb2x1bW5zJDYFDGNieENvbHVtbnMkNwUMY2J4Q29sdW1ucyQ4BQxjYnhDb2x1bW5zJDkFDWNieENvbHVtbnMkMTAFDWNieENvbHVtbnMkMTEFDWNieENvbHVtbnMkMTIFDWNieENvbHVtbnMkMTMFDWNieENvbHVtbnMkMTQFDWNieENvbHVtbnMkMTUFDWNieENvbHVtbnMkMTYFDWNieENvbHVtbnMkMTcFDWNieENvbHVtbnMkMTcFCFNvcnRBc2MxBQlTb3J0RGVzYzEFCVNvcnREZXNjMQUIU29ydEFzYzIFCVNvcnREZXNjMgUJU29ydERlc2MyBQhTb3J0QXNjMwUJU29ydERlc2MzBQlTb3J0RGVzYzMFEmN0bEV4cG9ydDEkcmRiV29yZAUSY3RsRXhwb3J0MSRyZGJXb3JkBRNjdGxFeHBvcnQxJHJkYkV4Y2VsBRNjdGxFeHBvcnQxJHJkYkV4Y2VsBRJjdGxFeHBvcnQxJHJkYkh0bWwFEmN0bEV4cG9ydDEkcmRiSHRtbAURY3RsRXhwb3J0MSRyZGJQZGYFFmN0bEV4cG9ydDEkcmRiRG93bmxvYWQFFmN0bEV4cG9ydDEkcmRiRG93bmxvYWQFE2N0bEV4cG9ydDEkcmRiRW1haWwFE2N0bEV4cG9ydDEkcmRiRW1haWw="})
            .end(function(err, res) {
                // console.log(res.text);
                var $ = cheerio.load(res.text);

                /**
                 * 前程
                 */
                var personItem = $('input[id="chkBox"]').toArray();

                personItem.forEach(item => {
                    let id = $(item).val();
                    parseDetail(id);
                    // console.log(id);
                });
            });
    });

};